<Window x:Class="HTrack.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:ui="http://schemas.lepo.co/wpfui/2022/xaml"
        xmlns:tray="http://schemas.lepo.co/wpfui/2022/xaml/tray"
        Title="Habit Tracker"
        Height="275"
        Width="1200"
        WindowStyle="None"
        AllowsTransparency="True"
        Background="Transparent"
        Topmost="False"
        ShowInTaskbar="False"
        ResizeMode="NoResize"
        Left="50"
        Top="50">
    
    <Border x:Name="MainBorder"
            Background="{DynamicResource BackgroundBrush}" 
            CornerRadius="0" 
            BorderBrush="{DynamicResource OutlineBrush}" 
            BorderThickness="2"
            MouseLeftButtonDown="Border_MouseLeftButtonDown">
        <Border.Effect>
            <DropShadowEffect Color="#FF0080" BlurRadius="15" ShadowDepth="0" Opacity="0.7"/>
        </Border.Effect>
        <Grid Margin="20">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>
            
            <!-- System Tray Icon -->
            <tray:NotifyIcon FocusOnLeftClick="True"                    
                           Name="TrayIcon" MenuOnRightClick="True"
                           TooltipText="HTrack" >
                <tray:NotifyIcon.Menu>
                    <ContextMenu MinWidth="65">
                        <MenuItem x:Name="Exit_Button" Height="34" Header="Exit" Click="ExitApp"  />
                    </ContextMenu>
                </tray:NotifyIcon.Menu>
            </tray:NotifyIcon>
            
            <!-- Header -->
            <TextBlock Grid.Row="0" 
                       Text="H A B I T   T R A C K E R" 
                       FontSize="18" 
                       FontWeight="Bold" 
                       FontFamily="Consolas, 'Courier New', monospace"
                       HorizontalAlignment="Center" 
                       Margin="0,5,0,15"
                       Foreground="#00FF00">
                <TextBlock.Effect>
                    <DropShadowEffect Color="#00FF00" BlurRadius="10" ShadowDepth="0" Opacity="0.8"/>
                </TextBlock.Effect>
            </TextBlock>
            
            <!-- Habit Grid Container -->
            <ScrollViewer Grid.Row="1" 
                          HorizontalScrollBarVisibility="Auto"
                          VerticalScrollBarVisibility="Hidden">
                <StackPanel Name="HabitGridContainer" Orientation="Vertical">
                    <!-- Main Habit Grid -->
                    <UniformGrid Name="HabitGrid" Rows="7" Margin="0,10,0,10"/>
                </StackPanel>
            </ScrollViewer>
            
            <!-- Scanning Line Animation -->
            <Canvas Grid.Row="1" IsHitTestVisible="False" ClipToBounds="True">
                <Rectangle x:Name="ScanLine" 
                          Width="2" 
                          Height="200"
                          Canvas.Left="-10">
                    <Rectangle.Fill>
                        <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                            <GradientStop Color="Transparent" Offset="0"/>
                            <GradientStop Color="#FF0080" Offset="0.5"/>
                            <GradientStop Color="Transparent" Offset="1"/>
                        </LinearGradientBrush>
                    </Rectangle.Fill>
                    <Rectangle.Effect>
                        <DropShadowEffect Color="#FF0080" BlurRadius="8" ShadowDepth="0" Opacity="1"/>
                    </Rectangle.Effect>
                </Rectangle>
                <Canvas.Triggers>
                    <EventTrigger RoutedEvent="Canvas.Loaded">
                        <BeginStoryboard>
                            <Storyboard RepeatBehavior="Forever">
                                <DoubleAnimation Storyboard.TargetName="ScanLine"
                                               Storyboard.TargetProperty="(Canvas.Left)"
                                               From="-10"
                                               To="1210"
                                               Duration="0:0:6"/>
                            </Storyboard>
                        </BeginStoryboard>
                    </EventTrigger>
                </Canvas.Triggers>
            </Canvas>
        </Grid>
    </Border>
</Window> 